{% extends "_layout.html" %}
{% block content %}
{% with messages = get_flashed_messages() %}
{% if messages %}
  <ul class=flashes>
  {% for message in messages %}
    <li>{{ message }}</li>
  {% endfor %}
  </ul>
{% endif %}
{% endwith %}
{% if current_user.is_authenticated%}
<h3>{{user.name}}</h3>
<h3>{{current_user.name}}</h3>
<img src="{{ user.profile_image_url }}"/>
<h4>{{user.id}}</h4>
<h4>{{current_user.id}}</h4>
<a href="{{ url_for('users.edit', id=current_user.id) }}"> Edit Profile </a>
<!-- Upload Images -->
<a href="{{ url_for('images.new') }}"> Upload Images </a>

{% for image in user.images %}
<div>
  <img src="{{ image.images_url }}" width="300"/>
  <p>Total donations received:</p>
  <p>{{ image.donations| sum(attribute="amount") }}</p>
  <a href="{{ url_for('images.payment', images_id=image.id) }}"> Donation </a>
</div>
{% endfor %}
{% endif %}
{% endblock %}